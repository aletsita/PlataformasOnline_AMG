@page
@model IndexModel
@using System.Net.Http.Headers;
@{
    ViewData["Title"] = "Home page";
    //Token
    string token =
    "EAAGbxeMTYmoBOzc5vhN2RtqB4lg6qFxisv0WJ5uFuuOgcxQcNr1LHmzBRBo4FZCu3CaDUXNlbY8QksKZAI17kspWkF3Hd20HFOf92xIgtEjMq0ZBPWUNFvU9GurolpLcAQ6PklyjZCvqTheOwP5z4r4yo6JZCqZC9lHZBKln7nGJ4fq39XnuyQZAq0FMuspZBgbxeFT02ZAzptoXsDYIiZBGIQsyvUrbfkZD";
    //Identificador de número de teléfono
    string idTelefono = "475212822336540";
    //Nuestro telefono
    string telefono = "52 644 254 5275";
    HttpClient client = new HttpClient();
    HttpRequestMessage request = new HttpRequestMessage(HttpMethod.Post,
    "https://graph.facebook.com/v15.0/" + idTelefono + "/messages");
    request.Headers.Add("Authorization", "Bearer " + token);
    request.Content = new StringContent("{ \"messaging_product\": \"whatsapp\", \"to\": \"" +
    telefono + "\", \"type\": \"template\", \"template\": { \"name\": \"hello_world\", \"language\": {\"code\": \"en_US\" } } }");
    request.Content.Headers.ContentType = new MediaTypeHeaderValue("application/json");
    HttpResponseMessage response = await client.SendAsync(request);
    //response.EnsureSuccessStatusCode();
    string responseBody = await response.Content.ReadAsStringAsync();
}
<div class="text-center">
<h1 class="display-4">Welcome</h1>
<p>Learn about <a href="https://docs.microsoft.com/aspnet/core">building Web apps with
ASP.NET Core</a>.</p>
</div

